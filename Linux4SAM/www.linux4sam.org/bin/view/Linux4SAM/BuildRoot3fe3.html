<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">

<!-- Mirrored from www.linux4sam.org/bin/view/Linux4SAM/BuildRoot?skin=print.myskin by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Jul 2021 19:03:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=iso-8859-1" /><!-- /Added by HTTrack -->
<head>
<link rel="stylesheet" href="https://www.linux4sam.org/pub/TWiki/RedDotPlugin/style.css" type="text/css" media="all" />
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/JQueryPlugin/jquery.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/JQueryPlugin/jquery-migrate.js"></script>
<link rel="stylesheet" href="https://www.linux4sam.org/pub/TWiki/JQueryPlugin/jquery-all.css" type="text/css" media="all" />
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/JQueryPlugin/jquery-all.js"></script>
<title>TWiki &middot; Linux4SAM &middot; BuildRoot &middot; (printable)</title>
<base  />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta http-equiv="Content-Style-Type" content="text/css" /> 
<meta name="generator" content="TWiki/NatSkin" /> 
<link rel="icon" href="https://www.linux4sam.org/pub/Linux4SAM/WebPreferences/favicon.ico" type="image/x-icon" /> 
<link rel="shortcut icon" href="https://www.linux4sam.org/pub/Linux4SAM/WebPreferences/favicon.ico" type="image/x-icon" />
<!-- 

  Enable the line below when firefox has fixed printing of pages
  that import css. See https://bugzilla.mozilla.org/show_bug.cgi?id=154892 

%GETSKINSTYLE% 

-->
<!-- template javascript -->

<!-- template javascript -->
<style type="text/css">
.natFeedIcon,
.blogEntryFeed,
.blogNavigation,
.blogAddComment {
  display:none;
}
/*
.natExternalLink:after {
  content: " (" attr(href) ") ";
}
*/
%WEBCOMPONENT{"WebCss"}%
</style>
</head>
<body class="natBody natBodyPrint">
<div class="natBodyContents">
  <div class="natMiddle natMain">
	 <div class="natMainContents">
<p /><h1><a name="Buildroot"></a> Buildroot </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="index3fe3.html?skin=print.myskin#Introduction"> Introduction</a> <ul>
<li> <a href="index3fe3.html?skin=print.myskin#Related_Links"> Related Links</a>
</li></ul> 
</li> <li> <a href="index3fe3.html?skin=print.myskin#How_to_build_Buildroot_for_AT91"> How to build Buildroot for AT91</a> <ul>
<li> <a href="index3fe3.html?skin=print.myskin#Prerequisites"> Prerequisites</a>
</li> <li> <a href="index3fe3.html?skin=print.myskin#Get_sources"> Get sources</a>
</li> <li> <a href="index3fe3.html?skin=print.myskin#Build_the_rootfs_image"> Build the rootfs image</a>
</li> <li> <a href="index3fe3.html?skin=print.myskin#Cross_toolchain"> Cross toolchain</a>
</li></ul> 
</li> <li> <a href="index3fe3.html?skin=print.myskin#Customizing_Buildroot"> Customizing Buildroot</a> <ul>
<li> <a href="index3fe3.html?skin=print.myskin#Customizing_Busybox_Linux_U_boot"> Customizing Busybox / Linux / U-boot / uClibc configuration</a>
</li> <li> <a href="index3fe3.html?skin=print.myskin#Adding_removing_packages_from_th"> Adding/removing packages from the rootfs</a>
</li> <li> <a href="index3fe3.html?skin=print.myskin#Updating_the_rootfs_for_another"> Updating the rootfs for another nand flash device</a>
</li> <li> <a href="index3fe3.html?skin=print.myskin#Add_your_own_software_to_Buildro"> Add your own software to Buildroot</a>
</li> <li> <a href="index3fe3.html?skin=print.myskin#Recent_FAQ"> Recent FAQ</a>
</li></ul> 
</li></ul> 
</div>
<p />
<hr />
<p />
<h1><a name="Introduction"></a> Introduction </h1>
<p />
Buildroot is a simple, efficient and easy-to-use tool to generate embedded Linux systems through cross-compilation'
<p />
It uses the Linux Kconfig configuration system, allowing easy selection of system content. The Makefile will include a .config file generated by Kconfig. The content of this file will determine what should be built.
<p />
It is relatively easy from there to add your own programs so your entire build process is automated.
<p />
Home website : <a href="http://www.buildroot.net/" target="_blank">http://www.buildroot.net/<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a>
<p />
<a href="http://www.buildroot.net/downloads/manual/manual.html" target="_blank">The Buildroot user manual<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a> can help you better understand how Buildroot works.
<p />
For our Linux4sam distributions, we actually use two buildroot trees, which work in conjunction.
One tree is named buildroot-at91, and it's available on <a href="https://github.com/linux4sam/buildroot-at91" target="_blank">github buildroot-at91 repository<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a>.
This repository buildroot-at91 is normally on top of a specific mainline Buildroot version, with none to very few patches on top, just to fix small issues from upstream Buildroot.<br>
We always build our Buildroot together with a second tree, named buildroot-external-microchip, available on <a href="https://github.com/linux4sam/buildroot-external-microchip" target="_blank">github buildroot-external-microchip repository<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a>, which is a specific <strong>Buildroot External</strong> that provides our specific packages , libs, etc. and it also includes the latest configuration for our boards. The buildroot External is some kind of Yocto layer if you are familiar with this, but does not have the full capabilities of a Yocto layer. We can see it as an addendum to the original buildroot. An External will provide additional files and packages for our distribution. <br /> 
While the mainline Buildroot builds correctly, it does not offer the full richness of a linux4sam distribution. For a full linux4sam distribution, we use this External to compliment the mainline Buildroot (or buildroot-at91) with additional features specific for our linux4sam distribution. 
<p />
For our linux4sam distribution , we always use our buildroot-at91 tree together with buildroot-external-microchip, and this is the way we recommend to everyone.
<p />
In theory , one can try to build our External with the upstream Buildroot repository, but you might miss some fixes which we made on top of upstream buildroot and pushed to our buildroot-at91. Also, in theory, our External can work with different versions of Buildroot upstream. However we do not test nor support this out of the box. Because in upstream buildroot, packages are changed, removed, added from one version to another, you might face build issues that we did not test during our linux4sam releases. To have a smooth experience, you have to checkout our specific tandem tags which we place on each repository in our trees, meaning pick one of our releases, and <strong>select on both trees the same tag for a correct build</strong>.
<p />
Currently the Buildroot can build <ul>
<li> at91bootstrap
</li> <li> u-boot-at91
</li> <li> linux-at91
</li> <li> A cross-compiler optimized for your SoC
</li> <li> Root filesystems of different types
</li> <li> Bootable SD card 
</li></ul> 
<p />
<h2><a name="Related_Links"></a> Related Links </h2> <ul>
<li> <a href="http://www.buildroot.net/" target="_blank">Buildroot<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a>
</li> <li> <a href="http://busybox.net/" target="_blank">BusyBox<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a>
</li> <li> <a href="http://uclibc.org/" target="_blank">uClibc.org<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a>
</li></ul> 
<p />
<p />
<h1><a name="How_to_build_Buildroot_for_AT91"></a> How to build Buildroot for AT91 </h1>
<p />
<h2><a name="Prerequisites"></a> Prerequisites </h2>
<p />
Host build system should be a Linux system with <a href="http://buildroot.uclibc.org/downloads/manual/manual.html#requirement" target="_blank">necessary software<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a> installed.
<p />
In addition to these required packages, you should also install libssl-dev:
<pre>
$ sudo apt-get install libssl1.0-dev
</pre>
or, depending on your host distribution:
<pre>
$ sudo apt-get install libssl-dev
</pre>
<p />
<img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/note.gif" width="16" height="16" alt="Note" title="Note" border="0" /> You can install missing packages using <code>yum install</code> with Fedora or <code>apt-get install</code> with Ubuntu or Debian. These commands may require <strong>root</strong> privileges or being in a correct sudoers group.
<p />
<h2><a name="Get_sources"></a> Get sources </h2>
<p />
To get the source code, you have to clone the buildroot-at91 and buildroot-external-microchip repositories. buildroot-at91 is a fork of Buildroot with a minimal amount of patches, only the ones which have not hit the mainline yet. The external tree provides stuff which won't hit the mainline: additional defconfigs and packages dedicated to our demos.
<p />
<pre>
$ git clone https://github.com/linux4sam/buildroot-at91.git
Cloning into &#39;buildroot-at91&#39;...
remote: Counting objects: 271126, done.
remote: Compressing objects: 100&#37; (2/2), done.
remote: Total 271126 (delta 0), reused 2 (delta 0), pack-reused 271124
Receiving objects: 100&#37; (271126/271126), 61.00 MiB &#124; 2.36 MiB/s, done.
Resolving deltas: 100&#37; (186357/186357), done.

$ ls buildroot-at91/
arch  board  boot  CHANGES  Config.in  Config.in.legacy  configs  COPYING  DEVELOPERS  docs  fs  linux  Makefile  Makefile.legacy  package  README  support  system  toolchain  utils


$ git clone https://github.com/linux4sam/buildroot-external-microchip.git
Cloning into &#39;buildroot-external-microchip&#39;...
remote: Counting objects: 571, done.
remote: Compressing objects: 100&#37; (159/159), done.
remote: Total 571 (delta 217), reused 288 (delta 170), pack-reused 225
Receiving objects: 100&#37; (571/571), 94.41 KiB &#124; 76.00 KiB/s, done.
Resolving deltas: 100&#37; (332/332), done.

$ ls buildroot-external-microchip/
board  Config.in  configs  COPYING  docs  external.desc  external.mk  package  patches  README.md  system
</pre>
<p />
The source code has been taken from the <code>master</code> branch which is pointing to the latest version of buildroot-at91 and buildroot-external-microchip. We advise you to use linux4sam tags to be sure that there is no mismatch between the versions of these two repositories. 
<p />
You can list them and use one of them by doing this:
<p />
<pre>
$ cd buildroot-external-microchip/
$ git tag &#124; grep linux4sam
linux4sam&#95;5.8
linux4sam&#95;6.0
&#91;...]
linux4sam&#95;6.1
linux4sam&#95;6.2
linux4sam-2020.04
linux4sam-2020.10
$ git checkout linux4sam-2020.10 -b buildroot-external-microchip-linux4sam-2020.10

$ cd ../buildroot-at91/
$ git tag &#124; grep linux4sam
linux4sam&#95;5.8
linux4sam&#95;5.8-rc1
linux4sam&#95;6.0
linux4sam&#95;6.0-rc1
linux4sam&#95;6.0-rc2
linux4sam&#95;6.0-rc3
linux4sam&#95;6.1
linux4sam&#95;6.1-rc1
linux4sam&#95;6.2
linux4sam-2020.04
linux4sam-2020.10
$ git checkout linux4sam-2020.10 -b buildroot-at91-linux4sam-2020.10
</pre>
<p />
<p />
<h2><a name="Build_the_rootfs_image"></a> Build the rootfs image </h2>
<p />
Assuming you are at the Buildroot root directory, you'll find a <code>configs</code> folder containing several default configurations. If you are familiar with kernel configuration, you'll see that it works in the same way.
<p />
For the same board, several defconfig files are provided inside the buildroot-at91. These defconfigs are from upstream and, as said above, without the richness of a full linux4sam release. They can be used for a minimal test image. <ul>
<li> <code>atmel_[soc]_xplained_defconfig</code> provides at91bootstrap, u-boot, the kernel image and dtb files, a very basic rootfs for NAND flash memory.
</li> <li> <code>atmel_[soc]_xplained_mmc_defconfig</code> provides the same stuff but for SD card. Moreover a SD card image is done to ease the creation of the bootable SD card.
</li> <li> <code>atmel_[soc]_xplained_dev_defconfig</code> and <code>atmel_[soc]_xplained_mmc_dev_defconfig</code> provide a rootfs with additional tools to use <span class="twikiNewLink"><a href="https://www.linux4sam.org/bin/edit/Linux4SAM/SoC?topicparent=Linux4SAM.BuildRoot;nowysiwyg=1" rel="nofollow" title="SoC (this topic does not yet exist; you can create it)">SoC</a></span> devices (<span class="twikiNewLink"><a href="https://www.linux4sam.org/bin/edit/Linux4SAM/I2C?topicparent=Linux4SAM.BuildRoot;nowysiwyg=1" rel="nofollow" title="I2C (this topic does not yet exist; you can create it)">I2C</a></span>, CAN, audio, etc.).
</li></ul> 
<p />
The external provides extra defconfigs in its own <code>configs</code> folder: <ul>
<li> <code>[soc]_[board]_headless_defconfig</code> provides barely the same stuff as <code>atmel_[soc]_xplained_mmc_dev_defconfig</code> plus AWS greengrass or other command-line tools, but with no graphics related packages.
</li> <li> <code>[soc]_[board]_graphics_defconfig</code> provides the same stuff plus a full graphics (EGT) demo.
</li></ul> 
All these defconfigs target the SD card as boot media.
<p />
If you want to build the <strong>basic</strong> rootfs image we provide for sama5d2-xplained for example, you'll have to do:
<pre>
$ make atmel&#95;sama5d2&#95;xplained&#95;mmc&#95;defconfig
</pre>
<img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/note.gif" width="16" height="16" alt="Note" title="Note" border="0" /> BR2_EXTERNAL is not mandatory if you don't plan to use the content of the external tree
<p />
If you want to build the <strong>linux4sam demo</strong> rootfs image we provide for sama5d2-xplained, you'll have to do:
<pre>
$ BR2&#95;EXTERNAL&#61;../buildroot-external-microchip/ make sama5d2&#95;xplained&#95;graphics&#95;defconfig
</pre>
<p />
Then you can build the rootfs:
<p />
<pre>
$ make
</pre>
<p />
Once compilation is done, have a look to <code>output/images</code> to see what has been generated:
<p />
<pre>
$ ls output/images/
at91bootstrap.bin          rootfs.ext2                       sama5d2&#95;xplained&#95;isc.dtbo     sama5d2&#95;xplained&#95;pda4.dtbo   sama5d2&#95;xplained&#95;qspi.dtbo                    zImage
at91-sama5d2&#95;xplained.dtb  rootfs.ext4                       sama5d2&#95;xplained.itb          sama5d2&#95;xplained&#95;pda5.dtbo   sama5d2&#95;xplained-sdcardboot-uboot-3.9.0.bin
boot.bin                   rootfs.tar                        sama5d2&#95;xplained&#95;ov7670.dtbo  sama5d2&#95;xplained&#95;pda7b.dtbo  sdcard.img
boot.vfat                  sama5d2&#95;xplained&#95;i2s0&#95;proto.dtbo  sama5d2&#95;xplained&#95;ov7740.dtbo  sama5d2&#95;xplained&#95;pda7.dtbo   u-boot.bin
</pre>
<p />
You can have a look at the <a class="twikiLink" href="DemoSD.html">Create a SD card with the demo</a> page to create an SD card from the <code>sdcard.img</code> file. If you want to flash NAND or whatever memory you want with Sam-Ba, please go to the <code>Using SAM-BA to flash components to board</code> section of your board.
<p />
<p />
<h2><a name="Cross_toolchain"></a> Cross toolchain </h2>
<p />
While creating the rootfs, Buildroot will build a cross toolchain (or will download or use one present on your machine). You can find it under <code>output/host/usr</code>:
<p />
<pre>
$ ls output/host/usr/bin
2to3                                             arm-linux-gcc-ranlib  fdtoverlay                libpng-config     python3.7m-config
2to3-3.7                                         arm-linux-gcov        fdtput                    libtool           python3-config
aclocal                                          arm-linux-gcov-dump   fincore                   libtoolize        python-config
aclocal-1.15                                     arm-linux-gcov-tool   findmnt                   linux32           python-freeze-importlib
arm-buildroot-linux-gnueabihf-addr2line          arm-linux-gdb         fixqt4headers.pl          linux64           pyvenv
arm-buildroot-linux-gnueabihf-ar                 arm-linux-gprof       flex                      linux-dtc         qdbuscpp2xml
arm-buildroot-linux-gnueabihf-as                 arm-linux-ld          flex++                    logger            qdbusxml2cpp
arm-buildroot-linux-gnueabihf-c++                arm-linux-ld.bfd      flock                     look              qlalr
arm-buildroot-linux-gnueabihf-c++.br&#95;real        arm-linux-nm          gapplication              lrelease          qmake
arm-buildroot-linux-gnueabihf-cc                 arm-linux-objcopy     gawk                      lsattr            qmlcachegen
arm-buildroot-linux-gnueabihf-cc.br&#95;real         arm-linux-objdump     gdbus                     lsblk             qmlimportscanner
arm-buildroot-linux-gnueabihf-c++filt            arm-linux-ranlib      gdbus-codegen             lscpu             qmllint
arm-buildroot-linux-gnueabihf-cpp                arm-linux-readelf     gdk-pixbuf-csource        lsipc             qmlmin
arm-buildroot-linux-gnueabihf-cpp.br&#95;real        arm-linux-size        gdk-pixbuf-pixdata        lslocks           qt.conf
arm-buildroot-linux-gnueabihf-elfedit            arm-linux-strings     gdk-pixbuf-query-loaders  lsmem             qvkgen
arm-buildroot-linux-gnueabihf-g++                arm-linux-strip       gdk-pixbuf-thumbnailer    lsns              rake
arm-buildroot-linux-gnueabihf-g++.br&#95;real        attr                  gem                       lupdate           rcc
arm-buildroot-linux-gnueabihf-gcc                autoconf              genbrk                    lzip              rdjpgcom
arm-buildroot-linux-gnueabihf-gcc-7.4.0          autoheader            gencfu                    m4                rdoc
arm-buildroot-linux-gnueabihf-gcc-7.4.0.br&#95;real  autom4te              gencnval                  makeconv          rename
arm-buildroot-linux-gnueabihf-gcc-ar             automake              gendict                   makedevs          renice
arm-buildroot-linux-gnueabihf-gcc.br&#95;real        automake-1.15         genimage                  mcookie           reset
arm-buildroot-linux-gnueabihf-gcc-nm             autopoint             genrb                     meson             rev
arm-buildroot-linux-gnueabihf-gcc-ranlib         autoreconf            getfacl                   mk&#95;cmds           ri
arm-buildroot-linux-gnueabihf-gcov               autoscan              getfattr                  mkenvimage        ruby
arm-buildroot-linux-gnueabihf-gcov-dump          autoupdate            getopt                    mkimage           script
arm-buildroot-linux-gnueabihf-gcov-tool          bison                 gettextize                mkpasswd          scriptreplay
arm-buildroot-linux-gnueabihf-gdb                cal                   gio                       moc               setarch
arm-buildroot-linux-gnueabihf-gprof              captoinfo             gio-querymodules          mount             setfacl
arm-buildroot-linux-gnueabihf-ld                 chacl                 glib-compile-resources    mountpoint        setfattr
arm-buildroot-linux-gnueabihf-ld.bfd             chattr                glib-compile-schemas      msgfmt            setsid
arm-buildroot-linux-gnueabihf-nm                 choom                 glib-genmarshal           msgmerge          sip
arm-buildroot-linux-gnueabihf-objcopy            cjpeg                 glib-gettextize           namei             smtpd.py
arm-buildroot-linux-gnueabihf-objdump            clear                 glib-mkenums              ncurses6-config   smtpd.py.7
arm-buildroot-linux-gnueabihf-ranlib             cmake                 gobject-query             ninja             swig
arm-buildroot-linux-gnueabihf-readelf            col                   gperf                     node              swig3.0
arm-buildroot-linux-gnueabihf-run                colcrt                gresource                 npm               syncqt.pl
arm-buildroot-linux-gnueabihf-size               colrm                 gsettings                 npx               tabs
arm-buildroot-linux-gnueabihf-strings            column                gtester                   openssl           tic
arm-buildroot-linux-gnueabihf-strip              compile&#95;et            gtester-report            patchelf          toe
arm-linux-addr2line                              convert-dtsv0         hexdump                   pcre-config       toolchain-wrapper
arm-linux-ar                                     cpack                 i386                      pcregrep          torque
arm-linux-as                                     c&#95;rehash              icu-config                pcretest          tput
arm-linux-c++                                    ctest                 icuinfo                   pkgconf           tset
arm-linux-c++.br&#95;real                            djpeg                 ifnames                   pkg-config        uic
arm-linux-cc                                     dmesg                 infocmp                   pkgdata           umount
arm-linux-cc.br&#95;real                             dtc                   infotocap                 prlimit           uname26
arm-linux-c++filt                                dtdiff                ipcmk                     pydoc             utmpdump
arm-linux-cpp                                    dumpimage             ipcrm                     pydoc3            uuidgen
arm-linux-cpp.br&#95;real                            easy&#95;install          ipcs                      pydoc3.7          uuidparse
arm-linux-elfedit                                easy&#95;install-2.7      irb                       python            whereis
arm-linux-g++                                    easy&#95;install-3.7      isosize                   python2           wrjpgcom
arm-linux-g++.br&#95;real                            eject                 jpegtran                  python2.7         x86&#95;64
arm-linux-gcc                                    erb                   kill                      python2.7-config  xgettext
arm-linux-gcc-7.4.0                              faked                 kmod                      python2-config    xmlwf
arm-linux-gcc-7.4.0.br&#95;real                      fakeroot              last                      python3           yacc
arm-linux-gcc-ar                                 fallocate             lastb                     python3.7
arm-linux-gcc.br&#95;real                            fdtdump               lconvert                  python3.7-config
arm-linux-gcc-nm                                 fdtget                libpng16-config           python3.7m
</pre> 
<p />
<img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/note.gif" width="16" height="16" alt="Note" title="Note" border="0" /> If you do a <code>make clean</code>, you will delete the rootfs but also the cross toolchain. You can save the cross toolchain in another place. Moreover you can tell Buildroot to use it to save time for next compilations. To do it run <code>make menuconfig</code> then go to the <code>Toolchain</code> menu. Then select <em>External toolchain</em> as <code>Toolchain type</code>, <em>Custom toolchain</em> as <code>Toolchain</code>, <em>Pre-installed toolchain</em> as <code>Toolchain origin</code>. Finally set <code>Toolchain path</code> and <code>Toolchain prefix</code>.
<p />
<h1><a name="Customizing_Buildroot"></a> Customizing Buildroot </h1>
<p />
Before building the rootfs image, you may want to customize it: adding/removing packages, modifying component configurations such as busybox and uclibc, generate the kernel, etc.
<p />
<h2><a name="Customizing_Busybox_Linux_U_boot"></a> Customizing Busybox / Linux / U-boot / uClibc configuration </h2>
<p />
All the explanations are available in the Buildroot manual <a href="http://buildroot.uclibc.org/downloads/manual/manual.html#_configuration_of_other_components" target="_blank">Configuration of other components<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a> section.
<p />
<h2><a name="Adding_removing_packages_from_th"></a> Adding/removing packages from the rootfs </h2>
<p />
You can easily add or remove packages from the rootfs. You simply have to do:
<pre>
BR2&#95;EXTERNAL&#61;../buildroot-external-microchip/ make menuconfig
</pre>
<p />
and to go to the <code>Package Selection for the target</code> menu. Packages are sorted by categories:
<p />
<a href="../../../pub/Linux4SAM/BuildRootBuild/buildroot_package_selection.png"><img src="../../../pub/Linux4SAM/BuildRootBuild/buildroot_package_selection.png" alt="buildroot_package_selection.png" width='800' height='500'/></a>
<p />
You simply have to go in the desired category and to select or deselect the packages you want. Once done, you can build your rootfs.
<p />
<img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/note.gif" width="16" height="16" alt="Note" title="Note" border="0" /> If you have already done a build and you want to remove packages, you may have to do <code>make clean</code> and to rebuild the whole rootfs to be sure that the packages will be removed.
<p />
<h2><a name="Updating_the_rootfs_for_another"></a> Updating the rootfs for another nand flash device </h2>
<p />
The rootfs are configured to run on the nand flash device present on atmel boards. If you use another one you may have to update some parameters. To do it, run <code>make menuconfig</code> and go to <code>Filesystem images</code>:
<p />
<a href="../../../pub/Linux4SAM/BuildRootBuild/buildroot_nand_conf.png"><img src="../../../pub/Linux4SAM/BuildRootBuild/buildroot_nand_conf.png" alt="buildroot_nand_conf.png" width='800' height='500'/></a>
<p />
For a jffs2 root filesystem, you may have to update the page and erase size from <code>Flash Type</code>.
<p />
For a ubifs root filesystem, you may have to update the <code>UBI logical erase block size</code>, the <code>UBI minimum I/O size</code>, the <code>Maximum LEB count</code>, the <code>UBI physical erase block size</code> and the <code>UBI sub-page size</code>. You can find more information about these parameters in the <a href="http://www.linux-mtd.infradead.org/doc/ubi.html" target="_blank">ubi documentation<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a>. 
<p />
<h2><a name="Add_your_own_software_to_Buildro"></a> Add your own software to Buildroot </h2>
<p />
Builroot is basically a big set of makefiles so you will have to follow some steps to insert your own application to the cross-building system. You should have a look at the <a href="http://buildroot.uclibc.org/downloads/manual/manual.html#adding-packages" target="_blank">official documentation<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a> since the procedure depends on the build system used.
<p />
<p />
<p />
<h2><a name="Recent_FAQ"></a> Recent FAQ </h2>
<p />
<p /> <dl>
<dt> <a class="twikiCurrentTopicLink twikiLink" href="BuildRoot.html">BuildRoot</a> </dt><dd> <br />&#8226; <a href="AudioFAQ.html" >Audio FAQ</a>: Audio with ALSA. () <br />&#8226; <a href="Sam9x60EkAttachingTm5000Display.html" >Sam 9 x 60 Ek Attaching Tm 5000 Display</a>: Addition to the other generic FAQ about LCD displays: <a class="twikiLink" href="ConnectModuleFromPDA.html">ConnectModuleFromPDA</a>. (<a class="twikiLink" href="Sam9x60EKMainPage.html">Sam9x60EK</a>)
</dd></dl> 
<p />
<p />
<hr /> 
	 </div>
  <div class="natMainFooterContents">
	 <div class="natTopicAttachments">  </div>
  </div>
  </div>
</div>
</body>

<!-- Mirrored from www.linux4sam.org/bin/view/Linux4SAM/BuildRoot?skin=print.myskin by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Jul 2021 19:03:45 GMT -->
</html>
<!-- template: view.print.nat.tmpl -->
<style>
h1,h1 span{color:#000;}
</style>