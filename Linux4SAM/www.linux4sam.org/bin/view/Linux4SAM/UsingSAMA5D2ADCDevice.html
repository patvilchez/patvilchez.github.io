<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">

<!-- Mirrored from www.linux4sam.org/bin/view/Linux4SAM/UsingSAMA5D2ADCDevice by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Jul 2021 19:06:56 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=iso-8859-1" /><!-- /Added by HTTrack -->
<head>
<link rel="stylesheet" href="https://www.linux4sam.org/pub/TWiki/RedDotPlugin/style.css" type="text/css" media="all" />
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/JQueryPlugin/jquery.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/JQueryPlugin/jquery-migrate.js"></script>
<link rel="stylesheet" href="https://www.linux4sam.org/pub/TWiki/JQueryPlugin/jquery-all.css" type="text/css" media="all" />
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/JQueryPlugin/jquery-all.js"></script>
<title> UsingSAMA5D2ADCDevice &lt; Linux4SAM &lt; TWiki</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="icon" href="https://www.linux4sam.org/pub/Linux4SAM/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="https://www.linux4sam.org/pub/Linux4SAM/WebPreferences/favicon.ico" type="image/x-icon" />
<link rel="alternate" href="https://www.linux4sam.org/bin/edit/Linux4SAM/UsingSAMA5D2ADCDevice?t=1625510949" type="application/x-wiki" title="Edit UsingSAMA5D2ADCDevice" />
<link rel="edit" href="https://www.linux4sam.org/bin/edit/Linux4SAM/UsingSAMA5D2ADCDevice?t=1625510949" title="Edit UsingSAMA5D2ADCDevice" />
<meta name="SCRIPTURLPATH" content="/bin" />
<meta name="SCRIPTSUFFIX" content="" />
<meta name="TEXT_JUMP" content="Jump" />
<meta name="TEXT_SEARCH" content="Search" />
<meta name="TEXT_NUM_TOPICS" content="Number of topics:" />
<meta name="TEXT_MODIFY_SEARCH" content="Modify search" />
<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="WebRss" />
<base ></base>
<!--BEHAVIOURCONTRIB--><script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/BehaviourContrib/behaviour.compressed.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TWikiJavascripts/twikiWindow.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TWikiJavascripts/twikiEvent.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TWikiJavascripts/twikiHTML.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TWikiJavascripts/twikiForm.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/PatternSkin/pattern.js"></script><style type="text/css" media="all">
@import url('https://www.linux4sam.org/pub/TWiki/TWikiTemplates/base.css');
</style>
<style type="text/css" media="all">

#patternTopBar,
#patternClearHeaderCenter,
#patternClearHeaderLeft,
#patternClearHeaderRight,
#patternTopBarContentsOuter,
#patternTopBarContents {
	height:100px; /* top bar height; make room for header columns */
	overflow:hidden;
}


#patternOuter {
	margin-left:14em;
}
#patternLeftBar {
	width:14em;
	margin-left:-14em;
}
</style>
<style type="text/css" media="all">
@import url('https://www.linux4sam.org/pub/TWiki/PatternSkin/layout.css');
@import url('https://www.linux4sam.org/pub/TWiki/PatternSkin/style.css');
@import url('https://www.linux4sam.org/pub/TWiki/PatternSkin/colors.css');
</style>
<style type="text/css" media="all">
	/* Styles that are set using variables */
	.patternBookView .twikiTopRow,
	.patternWebIndicator a img,
	.patternWebIndicator a:hover img {
		background-color:#D0D0D0;
	}
	#patternTopBarContents { background-image:url(https://www.linux4sam.org/pub/TWiki/PatternSkin/TWiki_header.gif); background-repeat:no-repeat;}
	
	.patternBookView {
		border-color:#D0D0D0;
	}
	.patternPreviewPage #patternMain {
		/* uncomment to set the preview image */
		/*background-image:url("/pub/TWiki/PreviewBackground/preview2bg.gif");*/
	}
	
</style><style type="text/css" media="all">


@import url('https://www.linux4sam.org/pub/TWiki/Linux4SAM/mystyle.css');
</style>
<style type="text/css" media="all">
	@import url("https://www.linux4sam.org/pub/TWiki/PatternSkin/print.css");
</style>
<!--[if IE]><style type="text/css" media="screen">
pre {
	overflow-x:auto;
	padding-bottom:expression(this.scrollWidth > this.offsetWidth ? 16 : 0);
}
</style>
<![endif]-->
<!--[if lte IE 6]> 
<style type="text/css">
#patternLeftBar {
	position:relative; /* IE 5.5 needs this or the contents won't show outside the parent container on print. IE 6.0 needs it only during printable copy! */
}
</style><![endif]-->
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TWikiJavascripts/twikiStyles.js"></script>
<!--GENERATED_HEADERS--><!-- TWISTYPLUGIN_TWISTY --> <style type="text/css" media="all">
@import url("https://www.linux4sam.org/pub/TWiki/TwistyContrib/twist.css");
</style>
<script type='text/javascript' src='https://www.linux4sam.org/pub/TWiki/BehaviourContrib/behaviour.compressed.js'></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TWikiJavascripts/twikilib.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TWikiJavascripts/twikiPref.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TWikiJavascripts/twikiCSS.js"></script>
<script type="text/javascript" src="https://www.linux4sam.org/pub/TWiki/TwistyContrib/twist.compressed.js"></script>
<script type="text/javascript">
// <![CDATA[
var styleText = '<style type="text/css" media="all">.twikiMakeVisible{display:inline;}.twikiMakeVisibleInline{display:inline;}.twikiMakeVisibleBlock{display:block;}.twikiMakeHidden{display:none;}</style>';
document.write(styleText);
// ]]>
</script>

<!-- TABLEPLUGIN_twikiAttachmentsTable --> <style type="text/css" media="all">
.tableSortIcon img {padding-left:.3em; vertical-align:text-bottom;}
.twikiTable#twikiAttachmentsTable td {border-style:solid none;}
.twikiTable#twikiAttachmentsTable th {border-style:solid none;}
.twikiTable#twikiAttachmentsTable td {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable th {vertical-align:middle;}
.twikiTable#twikiAttachmentsTable td {vertical-align:top;}
.twikiTable#twikiAttachmentsTable th {background-color:#ffffff;}
.twikiTable#twikiAttachmentsTable th.twikiSortedCol {background-color:#eeeeee;}
.twikiTable#twikiAttachmentsTable th {color:#0066cc;}
.twikiTable#twikiAttachmentsTable th a:link {color:#0066cc;}
.twikiTable#twikiAttachmentsTable th a:visited {color:#0066cc;}
.twikiTable#twikiAttachmentsTable th a:link font {color:#0066cc;}
.twikiTable#twikiAttachmentsTable th a:visited font {color:#0066cc;}
.twikiTable#twikiAttachmentsTable th a:hover {color:#ffffff;background-color:#0066cc;}
.twikiTable#twikiAttachmentsTable th a:hover font {color:#ffffff;background-color:#0066cc;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td {background-color:#ffffff;}
.twikiTable#twikiAttachmentsTable tr.twikiTableRowdataBg0 td.twikiSortedCol {background-color:#f5f5f5;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol0 {text-align:center;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol1 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol2 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol3 {text-align:right;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol4 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol5 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol6 {text-align:left;}
.twikiTable#twikiAttachmentsTable td.twikiTableCol7 {text-align:center;}
</style></head>
<body class="patternViewPage">
<a name="PageTop"></a>
<div id="patternScreen">
<div id="patternPageShadow">
<div id="patternPage">
<div id="patternWrapper"><div id="patternOuter">
<div id="patternFloatWrap">
<div id="patternMain">
<div id="patternClearHeaderCenter">
</div>
<p />
<div id="patternMainContents"><div class="patternTop"><span class="patternHomePath twikiLeft">
<a class="twikiCurrentWebHomeLink twikiLink" href="WebHome.html">Linux4SAM</a><span class='natSep'>&nbsp;&#187; </span><a class="twikiLink" href="TipsNTricks.html">TipsNTricks</a><span class='natSep'>&nbsp;&#187; </span><a class="twikiCurrentTopicLink twikiLink" href="UsingSAMA5D2ADCDevice.html">UsingSAMA5D2ADCDevice</a>
</span><!-- /patternHomePath--><span class="patternToolBar twikiRight"></span><!-- /patternToolBar--><br class="twikiClear" /></div><!--/patternTop--><div class="twikiContentHeader"></div><div class="patternContent"><div class="patternTopic"> <h1><a name="Using_the_SAMA5D2_compatible_ADC"></a>  Using the <span class="twikiNewLink"><a href="https://www.linux4sam.org/bin/edit/Linux4SAM/SAMA5D2?topicparent=Linux4SAM.UsingSAMA5D2ADCDevice;nowysiwyg=1" rel="nofollow" title="SAMA5D2 (this topic does not yet exist; you can create it)">SAMA5D2</a></span>-compatible ADC device </h1>
<p />
<div class="twikiToc"> <ul>
<li> <a href="#Introduction"> Introduction</a>
</li> <li> <a href="#Kernel"> Kernel</a>
</li> <li> <a href="#Software_triggers"> Software triggers</a> <ul>
<li> <a href="#Unsigned_single_ended_channel_co"> Unsigned single-ended channel conversion</a> <ul>
<li> <a href="#Setup"> Setup</a>
</li> <li> <a href="#Test_procedure"> Test procedure</a>
</li></ul> 
</li> <li> <a href="#Signed_differential_channel_conv"> Signed differential channel conversion</a> <ul>
<li> <a href="#Setup_AN1"> Setup</a>
</li> <li> <a href="#Test_procedure_AN1"> Test procedure</a>
</li></ul> 
</li></ul> 
</li> <li> <a href="#Hardware_triggers"> Hardware triggers</a> <ul>
<li> <a href="#How_it_works"> How it works</a>
</li> <li> <a href="#API"> API</a>
</li> <li> <a href="#How_to_set_it_up"> How to set it up</a>
</li> <li> <a href="#Testing_the_buffer"> Testing the buffer</a>
</li></ul> 
</li> <li> <a href="#Going_further"> Going further</a> <ul>
<li> <a href="#Understanding_the_in_voltageX_ty"> Understanding the in_voltageX_type file</a>
</li> <li> <a href="#Using_DMA_to_carry_data_on_hardw"> Using DMA to carry data on hardware trigger buffer</a> <ul>
<li> <a href="#Increasing_ADC_frequency_to_demo"> Increasing ADC frequency to demonstrate DMA capabilities</a>
</li></ul> 
</li> <li> <a href="#Using_digital_oversampling_for_1"> Using digital oversampling for 1 or 2 more bits of precision</a>
</li></ul> 
</li></ul> 
</div>
<p />
<hr />
<p />
<h2><a name="Introduction"></a> Introduction </h2>
<p />
This page describes how to test the features of the SAMA5D2-compatible ADC device. This driver uses the Industrial Input/Output (IIO) subsystem.
<p />
Documentation for the IIO subsystem is available in the kernel source code directory: <a href="http://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/drivers/staging/iio/Documentation" target="_blank">drivers/staging/iio/Documentation<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a> and <a href="http://git.kernel.org/cgit/linux/kernel/git/stable/linux-stable.git/tree/Documentation/iio" target="_blank">Documentation/iio<img alt="" border="0" height="12" src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a>.
<p />
<h2><a name="Kernel"></a> Kernel </h2>
<p />
The driver (features are added little by little) for the SAMA5D2-compatible ADC device is available on linux-at91 starting with version 4.1. Mainline kernel has the driver from version 4.6
<p />
Current feature set includes Software trigger, Hardware external trigger, DMA support, Resistive touchscreen support
<p />
The ADC drivers is automatically selected if you use <code>sama5_defconfig</code>. Otherwise, check you have set <code>CONFIG_AT91_SAMA5D2_ADC</code>.
<p />
To check that ADC driver is correctly loaded:
<pre>
# dmesg&#124;grep at91-sama5d2&#95;adc
at91-sama5d2&#95;adc fc030000.adc: version: 800
# ls /sys/bus/iio/devices/iio\:device0
dev                         in&#95;voltage2&#95;raw           in&#95;voltage8&#95;raw
in&#95;voltage-voltage&#95;scale    in&#95;voltage3&#95;raw           in&#95;voltage9&#95;raw
in&#95;voltage0-voltage1&#95;raw    in&#95;voltage4-voltage5&#95;raw  in&#95;voltage&#95;scale
in&#95;voltage0&#95;raw             in&#95;voltage4&#95;raw           name
in&#95;voltage10-voltage11&#95;raw  in&#95;voltage5&#95;raw           of&#95;node
in&#95;voltage10&#95;raw            in&#95;voltage6-voltage7&#95;raw  power
in&#95;voltage11&#95;raw            in&#95;voltage6&#95;raw           sampling&#95;frequency
in&#95;voltage1&#95;raw             in&#95;voltage7&#95;raw           subsystem
in&#95;voltage2-voltage3&#95;raw    in&#95;voltage8-voltage9&#95;raw  uevent
</pre>
<p />
<strong><em><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" /> Tips:</em></strong> The ADC controller doesn't manage its pins in the same way as other ones. PIOs can't be assigned to it. It will automatically use them (if not assigned to another peripheral) when enabling the corresponding channel. To reserve PIOs for the ADC, you could declare them as GPIO in the device tree. By doing this, if there is a conflict with another peripheral, you'll be warned. You should also disable pull-up and pull-down to have coherent measurement when the PIO is not used by the ADC device. Here is an exemple from at91-sama5d2_xplained.dts for AD4 signal:
<pre>
pinctrl&#95;adc&#95;default: adc&#95;default {
        pinmux &#61; &#60;PIN&#95;PD23&#95;&#95;GPIO&#62;;
        bias-disable;
};
</pre>
For example, pins PD20 and PD21 which are connected to ADC input channels 1 and 2 respectively are also used for i2c0 bus. i2c0 bus will not function if the ADC will request these pins for conversion.
<p />
<h2><a name="Software_triggers"></a> Software triggers </h2>
<p />
<h3><a name="Unsigned_single_ended_channel_co"></a> Unsigned single-ended channel conversion </h3>
<p />
<h4><a name="Setup"></a> Setup </h4>
<p /> <ul>
<li> Connect a waveform or DC generator to the pin 4 of J8 connector called A3. You can also use a resistor bridge as the image below shows
</li></ul> 
<p />
<img src="../../../pub/Linux4SAM/UsingSAMA5D2ADCDevice/20151215_174632.jpg" width="100%">
<p />
<h4><a name="Test_procedure"></a> Test procedure </h4>
<p /> <ul>
<li> request the conversion:
</li></ul> 
<pre>
# cat /sys/bus/iio/devices/iio\:device0/in&#95;voltage4&#95;raw 
3693
</pre> <ul>
<li> request the scale:
</li></ul> 
<pre>
# cat /sys/bus/iio/devices/iio\:device0/in&#95;voltage&#95;scale 
0.805664062
</pre> <ul>
<li> check the conversion by multiplying the conversion value with the scale:
</li></ul> 
<pre>
3693 x 0.8 &#61; 2954.4 mV
</pre>
<p />
<h3><a name="Signed_differential_channel_conv"></a> Signed differential channel conversion </h3>
<p />
<h4><a name="Setup_AN1"></a> Setup </h4>
<p />
Use A3 (AD4) and A6 (AD5) from J8 connector
<p />
<h4><a name="Test_procedure_AN1"></a> Test procedure </h4>
<p /> <ul>
<li> request the conversion:
</li></ul> 
<pre>
# cat /sys/bus/iio/devices/iio\:device0/ in&#95;voltage4-voltage5&#95;raw
-396
</pre> <ul>
<li> request the scale:
</li></ul> 
<pre>
# cat /sys/bus/iio/devices/iio\:device0/in&#95;voltage-voltage&#95;scale
1.611328125
</pre> <ul>
<li> check the conversion by multiplying the conversion value with the scale:
</li></ul> 
<pre>
-396 x 1.6 &#61; -633,6 mV
</pre> <ul>
<li> you can compare it manually with the help of single ended conversions:
</li></ul> 
<pre>
# cat /sys/bus/iio/devices/iio\:device0/in&#95;voltage4&#95;raw
1237
# cat /sys/bus/iio/devices/iio\:device0/in&#95;voltage5&#95;raw 
2031
# cat /sys/bus/iio/devices/iio\:device0/in&#95;voltage&#95;scale 
0.805664062

(1237-2031) x 0.8 &#61; -635.2 mV
</pre>
<p />
<h2><a name="Hardware_triggers"></a> Hardware triggers </h2>
<p />
Hardware triggers are an operating mode of the ADC where conversions are no longer triggered by the software but directly by the hardware.
For the SAMA5D2, currently there is one single type of hardware trigger, the external pin AD31, which on the Xplained board is connected on J17 pin 33 (labeled D52 on the PCB).
Support for the hardware external trigger has been in kernel mainline since kernel 4.14 and in Linux4SAM releases since 5.7.
</br>Since kernel 4.14, we can use DMA to carry our data when using the hardware trigger. Check <a class="twikiCurrentTopicLink twikiAnchorLink" href="UsingSAMA5D2ADCDevice.html#Using_DMA_to_carry_data_on_hardw">specific</a> section for details.
<p />
<h3><a name="How_it_works"></a> How it works </h3>
<p />
The external trigger is directly connected to the ADC inside the SoC. The ADC will monitor this pin once it's configured to do so. Once this pin will have edges (from logical 1 to logical 0 or the other way around), these will be detected by the ADC. Inside the device tree, one can configure if the ADC should react on rising edge (0-&gt;1), falling edge (1-&gt;0) or both type of edges. If an edge is detected, the ADC will start the conversion on all the enabled channels.
As opposed to the software trigger which is done on demand by the user with a command (userspace process requesting it ), the hardware trigger and conversion occurs independently on the user. Thus, all the conversion data has to be stored in some buffer, for later retrieval by the userspace. This is why we need to setup a buffer and have an interface to read the data from, if we want to use the hardware trigger.
<p />
<h3><a name="API"></a> API </h3>
<p />
IIO configuration of hardware triggers is also done through sysfs.
<p />
Important folders in the <code>iio:deviceX</code> directory are: <ul>
<li> <code>buffer</code>
</li> <li> <code>trigger</code>
</li> <li> <code>scan_elements</code>
</li></ul> 
<p />
The buffer directory contains 3 files: <ul>
<li> <code>enabled</code> : get and set the state of the buffer
</li> <li> <code>length</code> : get and set the length of the buffer.
</li></ul> 
<p />
The trigger directory contains only one file, current_trigger, that reports and get the trigger in use with the driver.
It also refers to the <code>triggerX</code> directories in <code>/sys/bus/iio/devices/</code>
<p />
Finally, scan_elements exposes 3 files per channel: <ul>
<li> <code>in_voltageX_en</code> : is this channel enabled?
</li> <li> <code>in_voltageX_index</code> : index of this channel in the buffer's chunks
</li> <li> <code>in_voltageX_type</code> : How the ADC stores its data. Reading this file should return you a weird looking string. How to interpret it is explained in the Going Further section
</li></ul> 
<p />
It also contains the same information for the timestamp, under the <code>in_timestamp_*</code> files.
<p />
<h3><a name="How_to_set_it_up"></a> How to set it up </h3>
<p />
Basically, what you should do for launching the hardware triggers is :
<p />
Set up the channels in use (you can enable any combination of the channels you want)
<pre>
# echo 1 &#62; /sys/bus/iio/devices/iio:device0/scan&#95;elements/in&#95;voltage0&#95;en
# echo 1 &#62; /sys/bus/iio/devices/iio:device0/scan&#95;elements/in&#95;voltage1&#95;en
# echo 1 &#62; /sys/bus/iio/devices/iio:device0/scan&#95;elements/in&#95;voltage2&#95;en
# echo 1 &#62; /sys/bus/iio/devices/iio:device0/scan&#95;elements/in&#95;voltage3&#95;en
</pre>
Set up the trigger we want to use (it must be the name of one of the triggers present in <code>iio/devices</code>).
<p />
<img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" /> With device tree, name of the device may look similar to "fc030000.adc-dev0-external_rising" instead of simply "at91_sama5d2-adc": the <code>name</code> sysfs file is there to inform you
<p />
<pre>
# echo &#34;fc030000.adc-dev0-external&#95;rising&#34; &#62; /sys/bus/iio/devices/iio:device0/trigger/current&#95;trigger
</pre>
or
<pre>
# echo &#34;fc030000.adc-dev0-external&#95;falling&#34; &#62; /sys/bus/iio/devices/iio:device0/trigger/current&#95;trigger
</pre>
for instance.
<p />
<img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" /> Depending on device tree configuration edge type, the trigger name will reflect the edge type that it detects.
<p />
Set up the buffer length (Maximum number of data kept in the buffer, if we reach this number, the older data will be dropped)
<pre>
# echo 100 &#62; /sys/bus/iio/devices/iio:device0/buffer/length
</pre>
Enable the capture
<pre>
# echo 1 &#62; /sys/bus/iio/devices/iio:device0/buffer/enable
#
</pre>
<p />
Now, all the captures are exposed in the character device /dev/iio:device0, with the following format
<p />
<table border="1" cellpadding="0" cellspacing="0" class="twikiTable" id="table1" rules="all">
<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
<td bgcolor="#ffffff" class="twikiFirstCol" colspan="4" valign="top"> 8 bytes </td>
<td bgcolor="#ffffff" class="twikiTableCol4" valign="top"> 8 bytes </td>
</tr>
<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
<td bgcolor="#edf4f9" class="twikiTableCol0 twikiFirstCol" valign="top"> Chan 0 </td>
<td bgcolor="#edf4f9" class="twikiTableCol1" valign="top"> Chan 1 </td>
<td bgcolor="#edf4f9" class="twikiTableCol2" valign="top"> Chan 2 </td>
<td bgcolor="#edf4f9" class="twikiTableCol3" valign="top"> Chan 3 </td>
<td bgcolor="#edf4f9" class="twikiTableCol4 twikiLastCol" valign="top"> Timestamp </td>
</tr>
<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
<td bgcolor="#ffffff" class="twikiTableCol0 twikiFirstCol twikiLast" valign="top"> 2 bytes </td>
<td bgcolor="#ffffff" class="twikiTableCol1 twikiLast" valign="top"> 2 bytes </td>
<td bgcolor="#ffffff" class="twikiTableCol2 twikiLast" valign="top"> 2 bytes </td>
<td bgcolor="#ffffff" class="twikiTableCol3 twikiLastCol twikiLast" valign="top"> 2 bytes </td>
</tr></table>
<p />
This means that you can <code>poll()</code> or <code>select()</code> on it to wait for data to arrive, and get them by reading the file, just like you would do with any other file.
<p />
And to stop the capture, just disable the buffer
<pre>
# echo 0 &#62; /sys/bus/iio/devices/iio:device0/buffer/enable
</pre>
<p />
<h3><a name="Testing_the_buffer"></a> Testing the buffer </h3>
<p />
In the IIO documentation there is a tool that allows to do quick tests on the buffer from the command-line. The source code is located in <code>tools/iio/generic_buffer.c</code>.
First, we need to compile it
<pre>
arm-linux-gnueabi-gcc --static generic&#95;buffer.c -o generic&#95;buffer
</pre>
<p />
or 
<p />
<pre>
&#60;path&#95;to&#95;cross-compiler/cross-compiler-prefix-&#62;-gcc --static generic&#95;buffer.c -o generic&#95;buffer
</pre>
<p />
or
<p />
<pre>
cd tools
make iio
</pre>
<p />
Then copy the <code>generic_buffer</code> program on your board.
<p />
Below is an example of how to use this tool :
<p />
First, load the driver:
<pre>
# modprobe at91-sama5d2&#95;adc
</pre>
Then enable the channels:
<pre>
# echo 1 &#62; /sys/bus/iio/devices/iio:device0/scan&#95;elements/in&#95;voltage1&#95;en
# echo 1 &#62; /sys/bus/iio/devices/iio:device0/scan&#95;elements/in&#95;voltage3&#95;en
</pre>
<p />
Finally, the <code>generic_buffer</code> tool does all the "enable" and "disable" actions for you.
You will only need to specify the IIO driver and the trigger you want to use (<code>fc030000.adc</code> and for the trigger <code>fc030000.adc-dev0-external_rising</code> for example).
You can also specify the buffer length to use (<code>2</code> in this example). The default value is <code>128</code>.
<p />
<pre>
# ./generic&#95;buffer -n fc030000.adc -t fc030000.adc-dev0-external&#95;rising -l 2
iio device number being used is 0
iio trigger number being used is 0
/sys/bus/iio/iio iio/iio:device0 fc030000.adc-dev0-external&#95;rising:

1681.420898 3296.777344
1841.748047 3296.777344
1841.748047 3296.777344

</pre>
<p />
While running, it displays values that are stored in the buffer. So using the setup above, we have the following trace:
<table border="1" cellpadding="0" cellspacing="0" class="twikiTable" id="table2" rules="all">
<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
<td bgcolor="#ffffff" class="twikiTableCol0 twikiFirstCol" valign="top">  </td>
<td align="right" bgcolor="#ffffff" class="twikiTableCol1" valign="top"> Channel 1 </td>
<td bgcolor="#ffffff" class="twikiTableCol2 twikiLastCol" valign="top"> Channel 3 </td>
</tr>
<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
<td bgcolor="#edf4f9" class="twikiTableCol0 twikiFirstCol" valign="top"> Sample 1 </td>
<td bgcolor="#edf4f9" class="twikiTableCol1" valign="top"> 1681.420898 </td>
<td bgcolor="#edf4f9" class="twikiTableCol2 twikiLastCol" valign="top"> 3296.777344 </td>
</tr>
<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
<td bgcolor="#ffffff" class="twikiTableCol0 twikiFirstCol" valign="top"> Sample 2 </td>
<td bgcolor="#ffffff" class="twikiTableCol1" valign="top"> 1841.748047 </td>
<td bgcolor="#ffffff" class="twikiTableCol2 twikiLastCol" valign="top"> 3296.777344 </td>
</tr>
<tr class="twikiTableEven twikiTableRowdataBgSorted1 twikiTableRowdataBg1">
<td bgcolor="#edf4f9" class="twikiTableCol0 twikiFirstCol twikiLast" valign="top"> Sample 3 </td>
<td bgcolor="#edf4f9" class="twikiTableCol1 twikiLast" valign="top"> 1841.748047 </td>
<td bgcolor="#edf4f9" class="twikiTableCol2 twikiLast" valign="top"> 3296.777344 </td>
<td bgcolor="#edf4f9" class="twikiTableCol3 twikiLastCol twikiLast" valign="top"> &nbsp; </td>
</tr></table>
<p />
<p />
<h2><a name="Going_further"></a> Going further </h2>
<p />
<h3><a name="Understanding_the_in_voltageX_ty"></a> Understanding the in_voltageX_type file </h3>
<p />
Reading the <code>in_voltageX_type</code> file should return you something like: <code>le:u10/16&gt;&gt;0</code> <ul>
<li> <code>le</code> represents the endianness, here little endian
</li> <li> <code>u</code> is the sign of the value returned. It could be either <code>u</code> (for unsigned) or <code>s</code> (for signed)
</li> <li> <code>10</code> is the number of relevant bits of information
</li> <li> <code>16</code> is the actual number of bits used to store the datum
</li> <li> <code>0</code> is the number of right shifts needed.
</li></ul> 
<p />
<h3><a name="Using_DMA_to_carry_data_on_hardw"></a> Using DMA to carry data on hardware trigger buffer </h3>
<p />
Starting from kernel 4.14, DMA support is available. By default, DMA is not used, if the watermark of the buffer is set to 1. </br> In IIO context, the watermark is the point of length inside the buffer that once is reached, the buffer will start to throw results into userspace.<br> With DMA activated, each conversion value is not transferred from memory to userspace, until the number of conversions reaches the watermark level. </br> Once this number is achieved, all results are copied at once to userspace. This means that we can achieve a faster conversion rate, because we will not stop the system after each conversion (IRQ, copy_to_user, etc.), but once every 'watermark' conversions.
<p />
To use the DMA support: </br> <ul>
<li>   Increase the buffer size to accommodate for more values:
</li></ul> 
<pre>
echo 100 &#62; /sys/bus/iio/devices/iio\:device0/buffer/length
</pre> <ul>
<li>  Configure watermark level:
</li></ul> 
<pre>
echo 50 &#62; /sys/bus/iio/devices/iio\:device0/buffer/watermark
</pre>
<p />
This means that the DMA will stop once 50 conversions are done (example), and then report the results. </br>If a single edge is detected on the hardware trigger, we should not see any conversion results. This is normal. Linux is no longer interrupted on each trigger, and the DMA will carry the data and notify only when the watermark is reached.</br> Once 50 edges happen, we should see all 50 results in bulk.</br>
<strong><em><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" /> Tips:</em></strong> Because the generic_buffer application doesn't know how many conversions it prints, actually the parameter "-c 5" means that will wait for 5 times watermark conversions. In our example that is 50x5=250.
</br></br> <ul>
<li> How to check if DMA is enabled, and current watermark level :
</li></ul> 
<pre>
cat /sys/bus/iio/devices/iio\:device0/hwfifo&#95;enabled
cat /sys/bus/iio/devices/iio\:device0/hwfifo&#95;watermark
</pre>
<p /> <ul>
<li>  Which are the maximum and minimum values for the DMA watermark ? (actually the DMA buffers sizes )
</li></ul> 
<pre>
cat /sys/bus/iio/devices/iio\:device0/hwfifo&#95;watermark&#95;min
cat /sys/bus/iio/devices/iio\:device0/hwfifo&#95;watermark&#95;max
</pre>
</br>
<strong><em><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" /> Tips:</em></strong> If the ADC driver uses DMA, it will report with a kernel notice that it uses DMA , and which channel it reserved. </br>
<strong><em><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" /> Tips:</em></strong> If the ADC driver stops using DMA and releases the resources, a kernel notice is emitted that ADC driver continues without DMA enabled. </br>
<p />
<h4><a name="Increasing_ADC_frequency_to_demo"></a> Increasing ADC frequency to demonstrate DMA capabilities </h4>
<p />
Currently in the Device Tree for the ADC, we can see the minimum and the maximum clock for the peripheral.</br>
The DT properties describe which clock the ADC supports:</br>
<pre>
atmel,min-sample-rate-hz &#61; &#60;200000&#62;;
atmel,max-sample-rate-hz &#61; &#60;20000000&#62;;
</pre>
</br>
By default, the driver will pick the minimum sample rate of the clock. This means that 200kHz will be used, and we can do a sample with a delay of 21 clocks (datasheet), until the ADC capacitors are loaded. This means we can achieve a theoretical speed of around 8 kSamples/second.</br>
To achieve a better speed, we can increase the clock to 20 mHz, which is the maximum supported sample rate:
<pre>
echo 20000000 &#62; /sys/bus/iio/devices/iio:deviceX/sampling&#95;frequency
</pre>
</br>
<p />
With this clock, we can push the ADC, DMA and kernel system to the limit and achieve a higher sampling speed. This could not be achieved if we did not use DMA, because the kernel would be interrupted for each conversion, and it would hog the CPU. During tests in our lab, we could manage to obtain 400kSamples/second until edges were lost. </br>
<p />
<strong><em><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" /> Tips:</em></strong> To get a clean and reliable trigger signal, we can use a PWM pin and configure the PWM subsystem accordingly. Then we can connect a wire between PWM output pin to the ADTRG pin. </br>
<strong><em><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" /> Tips:</em></strong> An oscilloscope can be used to measure exact number of edges versus the exact number of samples provided by the ADC, to see the reliability.
<p />
<h3><a name="Using_digital_oversampling_for_1"></a> Using digital oversampling for 1 or 2 more bits of precision </h3>
<p />
Starting with kernel 4.14 in our release linux4sam_6.0, oversampling can be used to achieve a better resolution for the ADC. Instead of 12 bits, we can use 14 bits.</br>
There is a slight ABI change with this support, from now on, reported data is always on 14 bits. This means that the conversion value is in range 0,16384. </br>
Without oversampling, the last 2 bits of data are always 0, thus if we shift to the right by 2 bits (or divide the value by 4), the obtained value is the same as before (12 bits, in range 0,4096).
<p />
To enable oversampling for one extra bit of data, we can configure:
<pre>
echo 4 &#62; /sys/bus/iio/devices/iio:deviceX/oversampling&#95;ratio
</pre>
<p />
This means that we can use 4 samples to get an additional bit. The ADC will do 4 measurements instead of a single one, and report a single value, the average of the 4, with an extra bit set. </br>
<strong><em><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" /> Tips:</em></strong> The ADC will automatically do the 4 conversions. A single edge is required for the hardware trigger. However, conversion time will take 4 times longer.
<p />
To enable oversampling for two extra bit of data, we can configure:
<pre>
echo 16 &#62; /sys/bus/iio/devices/iio:deviceX/oversampling&#95;ratio
</pre>
<p />
This means that we can use 16 samples to get an additional bit. The ADC will do 16 measurements instead of a single one, and report a single value, the average of the 16, with two extra bits set. </br>
<strong><em><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/tip.gif" alt="TIP" title="TIP" width="16" height="16" border="0" /> Tips:</em></strong> The ADC will automatically do the 16 conversions. A single edge is required for the hardware trigger. However, conversion time will take 16 times longer.
<p />
To see which oversampling ratios are available, use:</br>
<pre>
cat /sys/bus/iio/devices/iio:deviceX/oversampling&#95;ratio&#95;available
</pre>
<p />
To restore the default behavior (no oversampling enabled), use: </br>
<pre>
echo 1 &#62; /sys/bus/iio/devices/iio:deviceX/oversampling&#95;ratio
</pre> </div><!-- /patternTopic-->
<div class="twikiContentFooter"></div><div class="twikiForm">
<table class='twikiFormTable' border='1'><tr><th class='twikiFormTableHRow twikiFirstCol' colspan='2'>
<a class="twikiLink" href="WebFaqBaseForm.html">WebFaqBaseForm</a>
</th></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> Boards </td><td>
<a class="twikiLink" href="Sam9x60EKMainPage.html">Sam9x60EK</a>, <a class="twikiLink" href="Sama5d27WLSom1EKMainPage.html">Sama5d27WLSom1EK</a>, <a class="twikiLink" href="Sama5d27Som1EKMainPage.html">Sama5d27Som1EK</a>, <a class="twikiLink" href="Sama5d2PtcEKMainPage.html">Sama5d2PtcEK</a>, <a class="twikiLink" href="Sama5d2XplainedMainPage.html">Sama5d2Xplained</a>
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> Components </td><td>
<a class="twikiLink" href="LinuxKernel.html">Kernel</a>, <a class="twikiLink" href="LinuxKernel_4_1.html">linux-4.1-at91</a>, <a class="twikiLink" href="LinuxKernel_4_4.html">linux-4.4-at91</a>, <a class="twikiLink" href="LinuxKernel_4_9.html">linux-4.9-at91</a>, <a class="twikiLink" href="LinuxKernel_4_14.html">linux-4.14-at91</a>, <a class="twikiLink" href="LinuxKernel_4_19.html">linux-4.19-at91</a>, <a class="twikiLink" href="LinuxKernel_5_4.html">linux-5.4-at91</a>
</td></tr><tr valign='top'><td class='twikiFormTableRow twikiFirstCol' align='right'> Summary </td><td>
Using the SAMA5D2-compatible ADC device
</td></tr></table>
</div><!-- /twikiForm --><div class="twikiAttachments">
<div class="twistyPlugin twikiMakeVisibleInline">  <span id="topicattachmentslistshow" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/toggleopen.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span> <span id="topicattachmentslisthide" class="twistyRememberSetting twistyTrigger twikiUnvisited twistyHidden twistyInited"><a href="#"><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/toggleclose.gif" border="0" alt="" /><span class="twikiLinkLabel twikiUnvisited">Attachments</span></a> </span>  </div><!--/twistyPlugin twikiMakeVisibleInline--> <div class="twistyPlugin"><div id="topicattachmentslisttoggle" class="twistyRememberSetting twistyContent twikiMakeHidden twistyInited">
<table border="1" cellpadding="0" cellspacing="0" class="twikiTable" id="twikiAttachmentsTable" rules="rows" summary="Topic attachments"><caption>Topic attachments</caption>
<tr class="twikiTableOdd twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
<th bgcolor="#ffffff" class="twikiTableCol0 twikiFirstCol" valign="middle"> <a href="UsingSAMA5D2ADCDeviceaabf.html?sortcol=0;table=3;up=0#sorted_table" rel="nofollow" title="Sort by this column"><font color="#0066cc">I</font></a> </th>
<th bgcolor="#ffffff" class="twikiTableCol1" valign="middle"> <a href="UsingSAMA5D2ADCDevicead61.html?sortcol=1;table=3;up=0#sorted_table" rel="nofollow" title="Sort by this column"><font color="#0066cc">Attachment</font></a> </th>
<th bgcolor="#ffffff" class="twikiTableCol2" valign="middle"> <a href="UsingSAMA5D2ADCDevice306b.html?sortcol=2;table=3;up=0#sorted_table" rel="nofollow" title="Sort by this column"><font color="#0066cc">Action</font></a> </th>
<th bgcolor="#ffffff" class="twikiTableCol3" valign="middle"> <a href="UsingSAMA5D2ADCDevicee4a1.html?sortcol=3;table=3;up=0#sorted_table" rel="nofollow" title="Sort by this column"><font color="#0066cc">Size</font></a> </th>
<th bgcolor="#ffffff" class="twikiTableCol4" valign="middle"> <a href="UsingSAMA5D2ADCDevicee152.html?sortcol=4;table=3;up=0#sorted_table" rel="nofollow" title="Sort by this column"><font color="#0066cc">Date</font></a> </th>
<th bgcolor="#ffffff" class="twikiTableCol5" valign="middle"> <a href="UsingSAMA5D2ADCDeviceb628.html?sortcol=5;table=3;up=0#sorted_table" rel="nofollow" title="Sort by this column"><font color="#0066cc">Who</font></a> </th>
<th bgcolor="#ffffff" class="twikiTableCol6 twikiLastCol" valign="middle"> <a href="UsingSAMA5D2ADCDevice6808.html?sortcol=6;table=3;up=0#sorted_table" rel="nofollow" title="Sort by this column"><font color="#0066cc">Comment</font></a> </th>
</tr>
<tr class="twikiTableEven twikiTableRowdataBgSorted0 twikiTableRowdataBg0">
<td align="center" bgcolor="#ffffff" class="twikiTableCol0 twikiFirstCol twikiLast" valign="top"> <img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/jpg.gif" width="16" height="16" alt="JPEG" title="JPEG" border="0" /><span class="twikiHidden">jpg</span> </td>
<td align="left" bgcolor="#ffffff" class="twikiTableCol1 twikiLast" valign="top"> <a href="../../../pub/Linux4SAM/UsingSAMA5D2ADCDevice/20151215_174632.jpg">20151215_174632.jpg</a> </td>
<td align="left" bgcolor="#ffffff" class="twikiTableCol2 twikiLast" valign="top"> <a href="https://www.linux4sam.org/bin/attach/Linux4SAM/UsingSAMA5D2ADCDevice?filename=20151215_174632.jpg;revInfo=1" title="change, update, previous revisions, move, delete..." rel="nofollow">manage</a> </td>
<td align="right" bgcolor="#ffffff" class="twikiTableCol3 twikiLast" valign="top"> 3082.9&nbsp;K </td>
<td align="left" bgcolor="#ffffff" class="twikiTableCol4 twikiLast" valign="top"> <span class="twikiNoBreak">2016-04-26 - 15:18</span> </td>
<td align="left" bgcolor="#ffffff" class="twikiTableCol5 twikiLast" valign="top"> <a class="twikiLink" href="https://www.linux4sam.org/bin/login/Main/LudovicDesroches?origurl=/bin/view/Main/LudovicDesroches">LudovicDesroches</a> </td>
<td align="left" bgcolor="#ffffff" class="twikiTableCol6 twikiLastCol twikiLast" valign="top"> &nbsp; </td>
</tr></table>
</div></div> <!--/twistyPlugin--></div><!--//twikiAttachments--></div><!-- /patternContent-->
<div class="patternInfo twikiGrayText"><div class="patternRevInfo">r18 - 02 Jun 2020 - 06:45:41 - <a class="twikiLink" href="https://www.linux4sam.org/bin/login/Main/EugenHristev?origurl=/bin/view/Main/EugenHristev">EugenHristev</a></div><!-- /patternRevInfo--></div><!-- /patternInfo-->
</div><!-- /patternMainContents-->
</div><!-- /patternMain-->
<div id="patternLeftBar">
<div id="patternClearHeaderLeft"></div>
<div id="patternLeftBarContents">
<div class="patternWebIndicator"> <ul>
<li> <a class="twikiCurrentWebHomeLink twikiLink" href="WebHome.html"><img src="https://www.linux4sam.org/pub/TWiki/TWikiDocGraphics/web-bg-small.gif" width="13" height="13" alt="Web background" title="Web background" border="0" /> Linux4SAM</a>
</li></ul> 
</div>
<br>
<h2><a name="Linux4SAM"></a> <a class="twikiCurrentWebHomeLink twikiLink" href="WebHome.html"> Linux4SAM</a> </h2>
<ul>
  <li><a class="twikiLink" href="SoftwareTools.html">Software tools</a></li>
  <li><a class="twikiLink" href="AT91Bootstrap.html">AT91Bootstrap</a></li>
  <li><a class="twikiLink" href="U-Boot.html">U-Boot</a>
  <li><a class="twikiLink" href="LinuxKernel.html">Linux Kernel</a></li>
  <li><a class="twikiLink" href="DT-Overlay.html">DT-Overlay</a></li>
</ul>
<p />
<u><a class="twikiCurrentWebHomeLink twikiAnchorLink" href="WebHome.html#Open_source_embedded_distributio">Open source solutions</a></u>
<ul>
    <li><a class="twikiLink" href="YoctoProject.html">Yocto Project</a></li>
    <!--<li><a class="twikiLink" href="/bin/view/Linux4SAM/OpenEmbeddedAngstrom">OpenEmbedded / Angstrom</a></li>-->
    <li><a class="twikiLink" href="BuildRoot.html">Buildroot</a></li>
    <li><a class="twikiLink" href="OpenWrt.html">OpenWrt</a></li>
</ul>
<p />
<u><a class="twikiCurrentWebHomeLink twikiAnchorLink" href="WebHome.html#Applications">Applications</a></u>
<ul>
    <li><a class="twikiAnchorLink" href="Applications.html#Graphics_Toolkit">Graphics Toolkit</a></li>
    <li><a class="twikiAnchorLink" href="Applications.html#WiFi_and_Bluetooth">WiFi and Bluetooth</a></li>
</ul>
<p />
<h2><a name="Boards"></a> Boards </h2>
<ul>
    <li><a class="twikiLink" href="Sama5d2IcpMainPage.html">SAMA5D2-ICP</a></li>
    <li><a class="twikiLink" href="Sama5d27WLSom1EKMainPage.html">SAMA5D27 WLSOM1 EK</a></li>
    <li><a class="twikiLink" href="Sam9x60EKMainPage.html">SAM9X60-EK</a></li>
    <li><a class="twikiLink" href="Sama5d27Som1EKMainPage.html">SAMA5D27 SOM1 EK</a></li>
    <li><a class="twikiLink" href="Sama5d2PtcEKMainPage.html">SAMA5D2 PTC EK</a></li>
    <li><a class="twikiLink" href="Sama5d2XplainedMainPage.html">SAMA5D2 Xplained</a></li>
    <li><a class="twikiLink" href="Sama5d3XplainedMainPage.html">SAMA5D3 Xplained</a></li>
    <li><a class="twikiLink" href="Sama5d4XplainedMainPage.html">SAMA5D4 Xplained</a></li>
    <li><a class="twikiLink" href="GettingStarted.html">Older boards</a></li>
</ul>
<p />
<p />
<h2><a name="FAQ"></a> <a class="twikiLink" href="WebFaq.html">FAQ</a> </h2>
<div class="twikiToc"> <ul>
<li> <a href="WebFaq.html#FAQ_updates_by_Boards"> FAQ updates by Boards</a>
</li> <li> <a href="WebFaq.html#FAQ_updates_by_Components"> FAQ updates by Components</a>
</li></ul> 
</div>
<p />
<!--
<u>FAQ</u>
<ul>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/U-BootFAQ">U-Boot FAQ</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/BuildRootFAQ">BuildRoot FAQ</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/AudioFAQ">Audio FAQ</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/FAQ_9x5">AT91SAM9x5 FAQ</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/FAQ_9n12">AT91SAM9N12 FAQ</a></li>
</ul>
<p />
<u><a class="twikiLink" href="/bin/view/Linux4SAM/TipsNTricks">Tips &amp; Tricks</a></u>
<ul>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/AudioRecordOnAt91sam9g20ek">9G20EK Audio Recording</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/SAM9M10Gstreamer">9M10 vdec with Gstreamer</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/IioAdcDriver">IIO ADC driver</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/RealTime">Real Time on A91SAM SoC</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/SDCardBootNotice">SD card boot for AT91SAM SoC</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/PmeccConfigure">NAND ECC configuration (PMECC)</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/AT91BootstrapDebugEclipse">AT91Bootstrap Debugging with Eclipse for Linux</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/UsingIsi">Using ISI (Image Sensor Interface)</a></li>
    <li><a class="twikiLink" href="/bin/view/Linux4SAM/UsingMaxTouch">Using maXTouch (capacitive touchscreen)</a></li>
</ul>
<p />
<br><br>
<h2><a name="Demos"></a> <a class="twikiAnchorLink" href="/bin/view/Linux4SAM/GettingStarted#Demo_archives">Demos</a> </h2>
<p />
<u>For following products:</u>
<br><br>
<ul>
  <li><a class="twikiAnchorLink" href="/bin/view/Linux4SAM/GettingStarted#Demoa5d4xplained">SAMA5D4 Xplained</a></li>
  <li><a class="twikiAnchorLink" href="/bin/view/Linux4SAM/GettingStarted#Demoa5d4ek">SAMA5D4-EK</a> <br />  &nbsp;</li>
  <li><a class="twikiAnchorLink" href="/bin/view/Linux4SAM/GettingStarted#Demoa5d3x">SAMA5D3x-EK</a></li>
  <li><a class="twikiAnchorLink" href="/bin/view/Linux4SAM/GettingStarted#Demoa5d3x_yocto">SAMA5D3x-EK <br /> Home Automation Demo <br />  with Yocto</a></li>
  <li><a href="http://www.timesys.com/embedded-linux/resources/dev-center/sama5d3" target="_blank">SAMA5D3x-EK <br /> Home Automation Demo <br />  with LinuxLink<img alt="" border="0" height="12" src="/pub/TWiki/TWikiDocGraphics/external-link.gif" width="13" /></a> <br />  &nbsp;</li>
  <li><a class="twikiAnchorLink" href="/bin/view/Linux4SAM/GettingStarted_9n12#Demo_archives">AT91SAM9N12-EK</a></li>
  <li><a class="twikiAnchorLink" href="/bin/view/Linux4SAM/GettingStarted_9x5#Demo_archives">AT91SAM9x5-EK</a></li>
  <li><a class="twikiAnchorLink" href="/bin/view/Linux4SAM/GettingStarted#Demo9m10g45ek">AT91SAM9M10G45-EK</a></li>
  <li><a class="twikiAnchorLink" href="/bin/view/Linux4SAM/GettingStarted#Demo9g20">AT91SAM9G20-EK</a></li>
</ul>
-->
<p />
<p />
<h2><a name="Useful_links"></a> <a class="twikiLink" href="LinksToCommunities.html">Useful links</a> </h2>
<ul>
  <li><a href="https://www.microchip.com/forums/f540.aspx" target="_blank">Microchip Microprocessors forums</a></li>
  <li><a href="http://www.at91.com/" target="_blank">AT91 Community (archive)</a></li>
  <li><a href="http://www.microchip.com/" target="_blank">Microchip</a></li>
  <li><a href="https://github.com/linux4sam" target="_blank">Linux4SAM on GitHub</a></li>
  <!--<li><a class="twikiLink" href="/bin/view/Linux4SAM/LinuxNewsletter">Atmel | Linux newsletter</a></li>-->
</ul>
<br><br>
<h2><a name="NAVIGATION"></a> NAVIGATION </h2>
<p />
<div id="navButtonl">
<a class="twikiCurrentWebHomeLink twikiLink" href="WebHome.html"> Linux4SAM</a>
</div> <ul>
<li> <a class="twikiLink" href="WebTopicList.html"> Index</a>
</li> <li> <a class="twikiLink" href="WebChanges.html"> Changes</a>
</li> <li> <a class="twikiLink" href="WebNotify.html"> Notifications</a>
</li> <li> <a class="twikiLink" href="WebStatistics.html"> Statistics</a>
</li></ul> 
<p />
</div>
<!-- /patternLeftBarContents--></div>
<!-- /patternLeftBar-->
</div><!-- /patternFloatWrap-->
<div class="clear">&nbsp;</div>
</div><!-- /patternOuter--></div><!-- /patternWrapper-->
<div id="patternTopBar">
<div id="patternTopBarContents">
<table border="0" cellpadding="0" cellspacing="0" style="width:100%; margin-top:12px;">
<tr><td valign="middle"><span id="twikiLogo" class="twikiImage"><a href="../Linux4SAM.html"><img src="../../../pub/Main/TWikiPreferences/tux2_atmel_header.png" border="0" alt="Linux4SAM" style="border:none;" /></a></span></td>
<td align="right" valign="top" class="patternMetaMenu">
 <ul>
<li> <form name="jumpForm" action="https://www.linux4sam.org/bin/view/Linux4SAM/UsingSAMA5D2ADCDevice"><input id="jumpFormField" type="text" class="twikiInputField" name="topic" value="" size="18" /><noscript>&nbsp;<input type="submit" class="twikiButton" size="5" name="submit" value="Jump" />&nbsp;</noscript>   </form>
</li> <li> <form name="quickSearchForm" action="https://www.linux4sam.org/bin/view/Linux4SAM/WebSearch"><input type="text" class="twikiInputField" id="quickSearchBox" name="search" value="" size="18" /><input type="hidden" name="scope" value="all" /><input type="hidden" name="web" value="Linux4SAM" /><noscript>&nbsp;<input type="submit" size="5" class="twikiButton" name="submit" value="Search" />&nbsp;</noscript>   </form>
</li> <li> 
</li></ul> 
</td></tr></table>
<div class="page-title"> Linux &amp; Open Source for AT91 Microchip Microprocessors</div>
<div class="page-print">
<p>
<p />
<a href="UsingSAMA5D2ADCDevice3fe3.html?skin=print.myskin">Print</a></p>
<p />
</div>
</div></div>
<!-- /patternTopBar-->
<div id="patternBottomBar">
<div id="patternBottomBarContents">
<div id="patternWebBottomBar">
<p>Copyright &copy; by the contributing authors. All material on this collaboration platform is the property of the contributing authors. </p>
<p>Linux&reg; is the registered trademark of Linus Torvalds in the U.S. and other countries. </p>
<p>Microchip&reg; and others, are registered trademarks or trademarks of Microchip Technology Inc. and its subsidiaries. <a href="http://twiki.org/" target="_blank" class="natExternalLink"><img width="80" height="15" border="0" title="This site is powered by the TWiki collaboration platform" alt="This site is powered by the TWiki collaboration platform" src="https://www.linux4sam.org/linux4sam/T-logo-80x15.gif" class="img-twiki"></a></p>
<p>Arm&reg; and others are registered trademarks or trademarks of Arm Limited (or its affiliates).  Other terms and product names may be trademarks of others.</p>
<p>Ideas, requests, contributions ? Connect to <a href="LinksToCommunities.html" class="twikiLink">LinksToCommunities</a> page.</p>
<p>Syndicate this site<a href="WebRss" class="linux4sam-rss">RSS</a>
<a href="WebAtom" class="linux4sam-rss">ATOM</a></p>
</div>
<!--/patternWebBottomBar--></div>
<!-- /patternBottomBarContents--></div>
<!-- /patternBottomBar-->
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-10893750-1");
pageTracker._initData();
pageTracker._trackPageview();
} catch(err) {}
</script>
<script type="text/javascript">
  _bizo_data_partner_id = "8288";
</script>
<script type="text/javascript">
	(function() {
		  var s = document.getElementsByTagName("script")[0];
		  var b = document.createElement("script");
		  b.type = "text/javascript";
		  b.async = true;
		  b.src = (window.location.protocol === "https:" ? "https://sjs" : "http://js") + ".bizographics.com/insight.min.js";
		  s.parentNode.insertBefore(b, s);
	 })();
</script>
<noscript>
  <img height="1" width="1" alt="" style="display:none;" src="http://www.bizographics.com/collect/?pid=8288&amp;fmt=gif" />
</noscript>
</div><!-- /patternPage-->
</div><!-- /patternPageShadow-->
</div><!-- /patternScreen-->
</body>
<!-- Mirrored from www.linux4sam.org/bin/view/Linux4SAM/UsingSAMA5D2ADCDevice by HTTrack Website Copier/3.x [XR&CO'2014], Mon, 05 Jul 2021 19:07:12 GMT -->
</html>